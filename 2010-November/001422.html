<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> FLMSG 1.1.0
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/fldigi-alpha/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:fldigi-alpha%40lists.berlios.de?Subject=Re%3A%20FLMSG%201.1.0&In-Reply-To=%3C4CD767AD.9050906%40verizon.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001416.html">
   <LINK REL="Next"  HREF="001423.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>FLMSG 1.1.0</H1>
    <B>Dave Kleber</B> 
    <A HREF="mailto:fldigi-alpha%40lists.berlios.de?Subject=Re%3A%20FLMSG%201.1.0&In-Reply-To=%3C4CD767AD.9050906%40verizon.net%3E"
       TITLE="FLMSG 1.1.0">dave.kleber at verizon.net
       </A><BR>
    <I>Mon Nov  8 03:59:57 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001416.html">FLMSG 1.1.0
</A></li>
        <LI>Next message: <A HREF="001423.html">FLMSG 1.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1422">[ date ]</a>
              <a href="thread.html#1422">[ thread ]</a>
              <a href="subject.html#1422">[ subject ]</a>
              <a href="author.html#1422">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, Dave... I'll bet that I didn't have a space after my period. I 
racked my brains trying to reproduce the &quot;DOT&quot; thing this morning. And 
the other op on 80m had no problems to report. BTW, the other op is a 
very active NTS op on phone, NBEMS and CW. I defer many of my questions 
regarding NTS/Radiogram stuff to him. So, I'd say it's safe to say 
there's no bug to correct.

-Dave, KB3FXI


On 11/7/2010 3:34 PM, w1hkj wrote:
&gt;<i> Dave Kleber wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I just noticed in the new release of FLMSG 1.1.0, under the 
</I>&gt;&gt;<i> NTS/Radiogram form, periods in the message body are now being 
</I>&gt;&gt;<i> converted to &quot;DOT&quot; rather than &quot;X&quot; after the check button is clicked. 
</I>&gt;&gt;<i> I apologize for not catching this on the alpha. I just came across 
</I>&gt;&gt;<i> this during our 80m net this morning when sending a message to one of 
</I>&gt;&gt;<i> our checkins.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, on the ICS-205 form, the FEMA version of the form states 
</I>&gt;&gt;<i> &quot;System/Cache&quot; for the first column rather than &quot;Radio Type&quot; as it 
</I>&gt;&gt;<i> does in FLMSG.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Dave, KB3FXI 
</I>&gt;<i>
</I>&gt;<i> The rule iaw W3YVQ.v1.04-5/02 PSCM APP.-B NTS MPG-MESSAGE FORMAT P 
</I>&gt;<i> 1-1, CHAPTER 1 - THE ARRL MESSAGE FORMAT:
</I>&gt;<i>
</I>&gt;<i> 1.3.1 PUNCTUATION
</I>&gt;<i> PUNCTUATION characters are not used in the text except as follows:
</I>&gt;<i> /: The slash, &quot;/&quot;, is used to separate characters within a group, as 
</I>&gt;<i> in 304/BA. Since
</I>&gt;<i> the &quot;/&quot; is part of the group it does not qualify as a separate group 
</I>&gt;<i> for the check.
</I>&gt;<i> Although usually not used as a group by itself (a space on the left 
</I>&gt;<i> and on the right),
</I>&gt;<i> if so used it would be counted in the check.
</I>&gt;<i> X: The letter &quot;X&quot; used to denote a period. The letter &quot;X&quot; is never 
</I>&gt;<i> used as the last
</I>&gt;<i> group of the text. The &quot;X&quot; is a separate group and IS counted for the 
</I>&gt;<i> check.
</I>&gt;<i> R: The letter &quot;R&quot; is used in place of a decimal in mixed figure 
</I>&gt;<i> groups, as in 7013R5
</I>&gt;<i> (7013.5), or 146R670 (146.670). Since the &quot;R&quot; is part of the group it 
</I>&gt;<i> does not
</I>&gt;<i> qualify as a separate group for the check. (The inclusion of the &quot;R&quot; 
</I>&gt;<i> makes the
</I>&gt;<i> group a &quot;mixed group&quot; for transmission on voice.)
</I>&gt;<i>
</I>&gt;<i> 1.3.2 EMAIL, PACKET or INTERNET ADDRESSES
</I>&gt;<i>
</I>&gt;<i> Punctuation is not permitted. Appropriate spelled words are used as 
</I>&gt;<i> substitutes where required,
</I>&gt;<i> i.e.:
</I>&gt;<i> W3XXX ATSIGN AOL DOT COM (&quot;AT&quot; may be used for &quot;ATSIGN&quot;)
</I>&gt;<i> W3XXX ATSIGN WB3XXX DOT MD DOT USA DOT NA
</I>&gt;<i> HTTP COLON SLASH SLASH WWW DOT HOMEPAGE DOT COM
</I>&gt;<i> Notes: &quot;\&quot; is written as &quot;BACKSLASH&quot;, &quot;/&quot; is written as &quot;SLASH&quot;.
</I>&gt;<i> &quot;TILDE&quot;, &quot;UNDERSCORE&quot;, &quot;POUNDSIGN&quot;, etc., are often encountered.
</I>&gt;<i> Use &quot;UPPERCASE&quot; or &quot;LOWERCASE&quot; where required to specify case.
</I>&gt;<i> Use &quot;SPACE&quot; and &quot;DASH&quot; where they are an integral part of an address 
</I>&gt;<i> group.
</I>&gt;<i>
</I>&gt;<i> The way that flmsg tries to find the occurrence of the period is thus:
</I>&gt;<i>
</I>&gt;<i> A period followed by a space i.e. &quot;. &quot; is converted to &quot;X &quot;
</I>&gt;<i>
</I>&gt;<i> All embedded periods such as &quot;bellsouth.com&quot; are converted to &quot;DOT&quot; as 
</I>&gt;<i> in &quot;BELLSOUTH DOT COM&quot;
</I>&gt;<i>
</I>&gt;<i> &quot;3.14159&quot; becomes &quot;3R14159&quot;
</I>&gt;<i>
</I>&gt;<i> This is archaic behaviour dictated by the historic transmission 
</I>&gt;<i> schemes used before we entered the world of digital communications.  
</I>&gt;<i> They continue since we have no way of knowing how a Radiogram might be 
</I>&gt;<i> handled in route.
</I>&gt;<i>
</I>&gt;<i> Check your original text Dave to see where the period occurred.  If 
</I>&gt;<i> the conversion to DOT was not in accordance with the above then the 
</I>&gt;<i> code needs to be changed.
</I>&gt;<i>
</I>&gt;<i> 73,
</I>&gt;<i> Dave
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> P.S.  some pseudo code that shows how this is accomplished
</I>&gt;<i>
</I>&gt;<i> *// punctuation to text table*
</I>&gt;<i> const char *punctuation[] = {
</I>&gt;<i> &quot;. &quot;, &quot; X &quot;,
</I>&gt;<i> &quot;,&quot;, &quot; COMMA &quot;,
</I>&gt;<i> &quot;?&quot;, &quot; QUERY &quot;,
</I>&gt;<i> &quot;\\&quot;, &quot; BACKSLASH &quot;,
</I>&gt;<i> &quot;://&quot;, &quot; COLON SLASH SLASH &quot;,
</I>&gt;<i> &quot;~&quot;, &quot; TILDE &quot;,
</I>&gt;<i> &quot;_&quot;, &quot; UNDERSCORE &quot;,
</I>&gt;<i> &quot;@&quot;, &quot; AT &quot;,
</I>&gt;<i> &quot;#&quot;, &quot; POUNDSIGN &quot;,
</I>&gt;<i> &quot;\&quot;&quot;, &quot; QUOTE &quot;,
</I>&gt;<i> &quot;\'&quot;, &quot;&quot;,
</I>&gt;<i> 0, 0 };
</I>&gt;<i>
</I>&gt;<i> void cb_rg_check()
</I>&gt;<i> {
</I>&gt;<i>    string temp = txt_rg_msg-&gt;buffer()-&gt;text();
</I>&gt;<i>    if (temp.empty()) {
</I>&gt;<i>        txt_rg_check-&gt;value(&quot;&quot;);
</I>&gt;<i>        btn_rg_check-&gt;labelcolor(FL_BLACK);
</I>&gt;<i>        btn_rg_check-&gt;redraw_label();
</I>&gt;<i>        return;
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i>    // convert to uppercase
</I>&gt;<i>    for (size_t n = 0; n &lt; temp.length(); n++)
</I>&gt;<i>        temp[n] = toupper(temp[n]);
</I>&gt;<i>
</I>&gt;<i>    size_t pos = string::npos;
</I>&gt;<i>
</I>&gt;<i>    strip_lfs(temp);
</I>&gt;<i> *    // remove trailing period*
</I>&gt;<i>    if (temp[temp.length()-1] == '.') temp.erase(temp.length()-1,1);
</I>&gt;<i> *    // convert punctuation*
</I>&gt;<i>    for (int n = 0; punctuation[n]; n += 2)
</I>&gt;<i>        while ((pos = temp.find(punctuation[n])) != string::npos)
</I>&gt;<i>            temp.replace(pos,1,punctuation[n+1]);
</I>&gt;<i> *    //convert embedded periods*
</I>&gt;<i>    while ((pos = temp.find(&quot;.&quot;)) != string::npos)
</I>&gt;<i>        if (isdigit(temp[pos-1]) || isdigit(temp[pos+1]))
</I>&gt;<i>            temp[pos] = 'R';
</I>&gt;<i>        else
</I>&gt;<i>            temp.replace(pos, 1, &quot; DOT &quot;);
</I>&gt;<i>
</I>&gt;<i> *    // remove any user inserted end-of-lines*
</I>&gt;<i>    while ((pos = temp.find('\n')) != string::npos) temp[pos] = ' ';
</I>&gt;<i>
</I>&gt;<i> *    // only single spaces no trailing spaces, no leading spaces*
</I>&gt;<i>    while ((pos = temp.find(&quot;  &quot;)) != string::npos) temp.erase(pos,1);
</I>&gt;<i>    while (temp[temp.length() -1] == ' ') temp.erase(temp.length()-1, 1);
</I>&gt;<i>    if (temp[0] == ' ') temp.erase(0,1);
</I>&gt;<i>
</I>&gt;<i> *    // count number of words in textdef_rg_filename*
</I>&gt;<i>    int numwords = 1;
</I>&gt;<i>    if (temp.length()) {
</I>&gt;<i>        pos = 0;
</I>&gt;<i>        while ((pos = temp.find(&quot; &quot;, pos + 1)) != string::npos) 
</I>&gt;<i> numwords++;
</I>&gt;<i>    }
</I>&gt;<i>
</I>&gt;<i> *    // no more than 5 words to a line*
</I>&gt;<i>    if (numwords &gt; progStatus.wpl) {
</I>&gt;<i>        int wc = numwords;
</I>&gt;<i>        size_t pos = 0;
</I>&gt;<i>        while (wc &gt; progStatus.wpl) {
</I>&gt;<i>            for (int i = 0; i &lt; progStatus.wpl; i++) pos = temp.find(' 
</I>&gt;<i> ', pos + 1);
</I>&gt;<i>            temp[pos] = '\n';
</I>&gt;<i>            wc -= progStatus.wpl;
</I>&gt;<i>        }
</I>&gt;<i>    }
</I>&gt;<i> *    // insert trailing end-of-line*
</I>&gt;<i>    temp += '\n';
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001416.html">FLMSG 1.1.0
</A></li>
	<LI>Next message: <A HREF="001423.html">FLMSG 1.1.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1422">[ date ]</a>
              <a href="thread.html#1422">[ thread ]</a>
              <a href="subject.html#1422">[ subject ]</a>
              <a href="author.html#1422">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/fldigi-alpha">More information about the fldigi-alpha
mailing list</a><br>
</body></html>
